sudo: required
dist: trusty
language: node_js
matrix:
  include:
  - os: osx
    osx_image: xcode8.3
  - os: linux
    env: CC=clang CXX=clang++ npm_config_clang=1
    compiler: clang
cache:
  directories:
  - node_modules
node_js:
- '8'
install:
- npm install
script:
- npm run build:clean
- travis_wait 30 npm run build
deploy:
  prerelease: true
  draft: false
  tag_name: "$TRAVIS_TAG"
  name: ZeroTwo $TRAVIS_TAG
  provider: releases
  api_key:
    secure: "TSevvhgfiRZLG/SDB9k9AUbjL4kN4YwmUB2dwKOEos8proJa7cZZuqj8IrxtDBaSaVpOY/93ycBGrokKqc3tO1Ze88RayZX5CNon7kEwFRZ8h2MXUWdB5PxJEdHrGY6WT5ZhWifCxP9zD5KhvMVwgvawpdxSfy+WeNO5IvbyrXsRAs8vJYq3udJplmfB4X0n3A8rtxOCz3hv97ueZDbtFsJuomSOAJHR02UdF03vafGS7MpIvGzF9RAaVivi1JX2It6Q2bmPHS4W5XBgDIhd8+ivjWOHal0TEFPadYFZ3Cxsh1BwdOif3gqXfQxJOd+UTSbW3CJ3bCn3T80i6KgP7tSukA6kUmSt00jZ7k1WmTCv8CMpMnXhBVfzNA03bU9Mj4y2ZB4hHMxIn97A2iIVf0zgJy1F6qqVTu/O69A69OMsFotOSiIbVTLn9TzY/yUorhRtBOArBI9Ahs7ePTcvPR31knwBYz6TI1AWxecYcQGOzJn3qaHfRjObmCuQ2J6TwT9W421JZToah63tAlkH3qZYm5UPlgk5YAcmHKIbbgrhZ2N3SJSanoyfxsR1WSfh4S4UrgsczxOqcSgqwCF29poP4RVmE4B62PUiCvvVQPBUqI2E1+h1K4Mom+xPrHqcP5cgwxRFBnOPmWUiaNdb6vN+5JnTgDEmhI3DYutC1CY="
  file_glob: true
  file:
  - build/*.deb
  - build/*.dmg
  on:
    repo: NicoAiko/zerotwo
    tags: true
branches:
  only:
  - "/v\\d+\\.\\d+\\.\\d+\\-?[a-z]*/"
